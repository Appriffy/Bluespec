{"version":3,"sources":["src/app/user/education-details/education-details.page.html","src/app/user/education-details/education-details.module.ts","src/app/user/education-details/education-details.page.ts","src/app/user/education-details/education-details.resolver.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,IAAA,mBAAA,CAAA,CAAA,CAAA,mBAAA;AAAe;;;AAAA,IAAA,mBAAA,CAAA,SAAA,CAAA,GAAA,2rGAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACWf,QAAM,MAAM,GAAW,CACrB;AACE,MAAA,IAAI,EAAE,EADR;AAEE,MAAA,SAAS,EAAE,oDAAA,CAAA,sBAAA,CAFb;AAGE,MAAA,OAAO,EAAE;AACP,QAAA,IAAI,EAAE,wDAAA,CAAA,0BAAA;AADC;AAHX,KADqB,CAAvB;;AAyBA,QAAa,0BAAb;AAAA;AAAA,KAAA;;AAAa,IAAA,0BAA0B,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CAftC,MAAA,CAAA,0CAAA,CAAA,UAAA,CAAA,CAAA,CAAS;AACR,MAAA,OAAO,EAAE,CACP,2CAAA,CAAA,aAAA,CADO,EAEP,4CAAA,CAAA,cAAA,CAFO,EAGP,2CAAA,CAAA,aAAA,CAHO,EAIP,2CAAA,CAAA,qBAAA,CAJO,EAKP,0DAAA,CAAA,kBAAA,CALO,EAMP,4CAAA,CAAA,cAAA,CAAA,CAAa,QAAb,CAAsB,MAAtB,CANO,CADD;AASR,MAAA,YAAY,EAAE,CAAC,oDAAA,CAAA,sBAAA,CAAD,CATN;AAUR,MAAA,SAAS,EAAE,CACT,wDAAA,CAAA,0BAAA,CADS,EAET,0CAAA,CAAA,aAAA,CAFS;AAVH,KAAT,CAesC,CAAA,EAA1B,0BAA0B,CAA1B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACdb,QAAa,oBAAb;AAAA;AAAA;AAWE,oCAAmB,eAAnB,EACU,KADV,EAEU,MAFV,EAGU,cAHV,EAIU,WAJV,EAKU,YALV,EAMU,WANV,EAMkC;AAAA;;AANf,aAAA,eAAA,GAAA,eAAA;AACT,aAAA,KAAA,GAAA,KAAA;AACA,aAAA,MAAA,GAAA,MAAA;AACA,aAAA,cAAA,GAAA,cAAA;AACA,aAAA,WAAA,GAAA,WAAA;AACA,aAAA,YAAA,GAAA,YAAA;AACA,aAAA,WAAA,GAAA,WAAA;AAdV,aAAA,OAAA,GAAgB,IAAhB;AAIA,aAAA,WAAA,GAAc,EAAd;AAUuC;;AAjBzC;AAAA;AAAA,mCAmBU;AAAA;;AAEN,eAAK,WAAL,CAAiB,wBAAjB,CAA0C,SAA1C,CAAoD,UAAA,KAAK,EAAG;AAC1D,YAAA,KAAI,CAAC,KAAL,GAAa,KAAK,CAAC,KAAnB;AACA,YAAA,KAAI,CAAC,gBAAL,GAAwB,KAAK,CAAC,QAA9B;AACA,YAAA,KAAI,CAAC,OAAL,GAAe,KAAf;;AACM,gBAAG,kDAAA,CAAA,eAAA,CAAA,CAAc,QAAjB,EAA0B;AACxB,cAAA,OAAO,CAAC,GAAR,CAAY,wBAAsB,IAAI,CAAC,SAAL,CAAe,KAAf,CAAlC;;AACA,cAAA,KAAI,CAAC,YAAL,CAAkB,YAAlB,CAA+B,KAAK,CAAC,OAArC;AACC;AACN,WARL;AAUA,eAAK,WAAL,CAAiB,YAAjB,GAAgC,IAAhC,CAAqC,UAAA,aAAa,EAAE;AAClD,YAAA,KAAI,CAAC,SAAL,GAAiB,aAAjB;AACA,YAAA,KAAI,CAAC,eAAL,GAAuB,KAAI,CAAC,SAAL,CAAe,EAAtC;AACA;;AACA,YAAA,KAAI,CAAC,KAAL,CAAW,QAAX,CAAoB,SAApB,CAA8B,UAAA,MAAM,EAAG;AACvC,kBAAG,MAAM,IAAI,MAAM,CAAC,GAAP,CAAW,SAAX,CAAb,EAAmC;AACnC,gBAAA,KAAI,CAAC,eAAL,GAAuB,MAAM,CAAC,GAAP,CAAW,SAAX,CAAvB;;AACA,oBAAG,KAAI,CAAC,eAAL,IAAwB,CAA3B,EAA6B;AAC3B,kBAAA,KAAI,CAAC,MAAL,CAAY,QAAZ,CAAqB,CAAC,gBAAD,CAArB;AACD;AACF;AACA,aAPC;;AASF,gBAAG,KAAI,CAAC,SAAL,CAAe,EAAf,KAAsB,KAAI,CAAC,eAA9B,EAA8C;AAC5C,kBAAG,KAAI,CAAC,SAAL,CAAe,OAAf,KAA2B,CAA9B,EAAgC;AAC9B,gBAAA,KAAI,CAAC,MAAL,CAAY,QAAZ,CAAqB,CAAC,cAAD,CAArB;AACD;AACF;AAEA,WAnBD;AAqBD;AApDH;AAAA;AAAA,0CAuDiB;AACb,UAAA,OAAO,CAAC,GAAR,CAAY,0BAAZ;AACA,eAAK,SAAL;AACD;AA1DH;AAAA;AAAA,oCA4DW;AAAA;;AACH;AACA,eAAK,OAAL,GAAe,IAAf;AACA,eAAK,cAAL,CACC,GADD,CACK,kDAAA,CAAA,eAAA,CAAA,CAAc,IADnB,EAEC,IAFD,CAEM,UAAA,GAAG,EAAG;AACZ,gBAAI,GAAJ,EAAS;AACR;AACA,cAAA,MAAI,CAAC,WAAL,CAAiB,gBAAjB,CAAkC,GAAG,CAAC,OAAtC,EAA+C,MAAI,CAAC,eAApD,EAAqE,SAArE,CACC,UAAC,GAAD,EAAa;AACX,gBAAA,OAAO,CAAC,GAAR,CAAY,wDAAsD,IAAI,CAAC,SAAL,CAAe,GAAf,CAAlE;;AACF,oBAAI,CAAC,GAAG,CAAC,KAAT,EAAgB;AAChB;AACA,kBAAA,MAAI,CAAC,WAAL,CAAiB,wBAAjB,CAA0C,IAA1C,CAA+C,GAA/C;AACC,iBAHD,MAGO;AACL,kBAAA,MAAI,CAAC,YAAL,CAAkB,YAAlB,CAA+B,GAAG,CAAC,OAAnC;AACD;AACA,eATF,EAUC,UAAC,KAAD,EAAe;AACf,gBAAA,MAAI,CAAC,YAAL,CAAkB,YAAlB,CAA+B,yCAAuC,KAAK,CAAC,OAA5E;AACC,eAZF,EAaC,YAAK,CACH;AAEH,eAhBA;AAkBD;;AACC,aArBD,MAqBO;AACL,cAAA,MAAI,CAAC,YAAL,CAAkB,YAAlB,CAA+B,6DAA/B;AACD;AACA,WA3BD,EAHG,CA+BH;AACL;AA5FH;AAAA;AAAA,gDA8F6B;;;;;;;;;;AACX,2BAAM,KAAK,eAAL,CAAqB,MAArB,CAA4B;AAC9C,sBAAA,SAAS,EAAE,mEAAA,CAAA,6BAAA,CADmC;AAE9C,sBAAA,QAAQ,EAAE,kBAFoC;AAG9C,sBAAA,cAAc,EAAE;AACd,mCAAW,KAAK;AADF;AAH8B,qBAA5B,CAAN;;;AAAR,oBAAA,K;;AAON,2BAAM,KAAK,CAAC,OAAN,EAAN;;;;;;;;;AACD;AAvGH;AAAA;AAAA,0CAyG0B,IAzG1B,EAyGoD;;;;;;;;;;AAClC,2BAAM,KAAK,eAAL,CAAqB,MAArB,CAA4B;AAC9C,sBAAA,SAAS,EAAE,mEAAA,CAAA,6BAAA,CADmC;AAE9C,sBAAA,cAAc,EAAE;AACd,gCAAQ;AADM;AAF8B,qBAA5B,CAAN;;;AAAR,oBAAA,K;;AAMN,2BAAM,KAAK,CAAC,OAAN,EAAN;;;;;;;;;AACD;AAjHH;;AAAA;AAAA,OAAA;;;;cAWsC,2CAAA,CAAA,iBAAA;;cACnB,4CAAA,CAAA,gBAAA;;cACC,4CAAA,CAAA,QAAA;;cACQ,sDAAA,CAAA,gBAAA;;cACH,oDAAA,CAAA,aAAA;;cACC,oDAAA,CAAA,cAAA;;cACD,0CAAA,CAAA,aAAA;;;;AAjBZ,IAAA,oBAAoB,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CAPhC,MAAA,CAAA,0CAAA,CAAA,WAAA,CAAA,CAAA,CAAU;AACT,MAAA,QAAQ,EAAE,uBADD;AAET,MAAA,QAAA,EAAA,kCAAA,CAAA,iBAAA,CAAA,CAAA,mBAAA;AAAA;AAAA,0GAAA,CAAA,EAAA,OAFS;;;;;;;;AAAA,KAAV,CAOgC,E,uEAWK,2CAAA,CAAA,iBAAA,C,EACnB,4CAAA,CAAA,gBAAA,C,EACC,4CAAA,CAAA,QAAA,C,EACQ,sDAAA,CAAA,gBAAA,C,EACH,oDAAA,CAAA,aAAA,C,EACC,oDAAA,CAAA,cAAA,C,EACD,0CAAA,CAAA,aAAA,C,EAjBQ,CAAA,EAApB,oBAAoB,CAApB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACdb,QAAa,wBAAb;AAAA;AAAA;AAEE,wCAAoB,WAApB,EAA4C;AAAA;;AAAxB,aAAA,WAAA,GAAA,WAAA;AAA6B;;AAFnD;AAAA;AAAA,kCAIS,CACL;AACA;AACA;AAGF;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACC;AArBH;;AAAA;AAAA,OAAA;;;;cAEmC,0CAAA,CAAA,aAAA;;;;AAFtB,IAAA,wBAAwB,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CADpC,MAAA,CAAA,0CAAA,CAAA,YAAA,CAAA,CAAA,EACoC,E,uEAEF,0CAAA,CAAA,aAAA,C,EAFE,CAAA,EAAxB,wBAAwB,CAAxB","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"app/user\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Education Details</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button fill=\\\"clear\\\" color=\\\"light\\\" class=\\\"filters-btn\\\" (click)=\\\"loadItems()\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"refresh\\\"></ion-icon>\\n      </ion-button>\\n      <ion-button (click)=\\\"openAddEduDetailModal()\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"add\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"firebase-listing-content\\\">\\n  <!-- <p>{{dataDebug}}</p> -->\\n  <ion-list class=\\\"items-list\\\" *ngIf=\\\"items?.length > 0  && !loading\\\">\\n\\n    <ion-item tappable class=\\\"list-item\\\" *ngFor=\\\"let item of items\\\" (click)=\\\"onEduItemSelected(item)\\\">\\n\\n      <!-- <ion-item class=\\\"list-item\\\" *ngFor=\\\"let item of items\\\"  [routerLink]=\\\"['/education-details', item]\\\"></ion-item> -->\\n\\n      <ion-row class=\\\"user-row\\\">\\n        <ion-col class=\\\"user-data-wrapper\\\">\\n          <div class=\\\"user-info\\\">\\n\\n            <h3 class=\\\"user-name\\\" *ngIf=\\\"item.title\\\">\\n              <app-text-shell animation=\\\"bouncing\\\" [data]=\\\"item.title+' ('+item.level_name+')'\\\"></app-text-shell>\\n            </h3>\\n\\n            <h5 class=\\\"user-age\\\">\\n              <app-text-shell animation=\\\"bouncing\\\" [data]=\\\"item.organization\\\"></app-text-shell>\\n            </h5>\\n\\n            <h5 class=\\\"user-age\\\" *ngIf=\\\"item.is_current\\\">\\n              <app-text-shell animation=\\\"bouncing\\\" [data]=\\\"item.yoj?.concat(' to Current')\\\"></app-text-shell>\\n            </h5>\\n            \\n            <h5 class=\\\"user-age\\\" *ngIf=\\\"!item.is_current\\\">\\n              <app-text-shell animation=\\\"bouncing\\\" [data]=\\\"item.yoj?.concat(' - ').concat(item.yop)\\\"></app-text-shell>\\n            </h5>\\n\\n            <h5 class=\\\"user-age\\\">\\n              <app-text-shell animation=\\\"bouncing\\\" [data]=\\\"'Score: '+item.score?.concat(' ').concat(item.score_type)\\\"></app-text-shell>\\n            </h5>\\n\\n          </div>\\n        </ion-col>\\n      </ion-row>\\n    </ion-item>\\n  </ion-list>\\n  <!------- Empty View ------->\\n  <ion-grid style=\\\"height: 100%\\\" *ngIf=\\\"items?.length == 0 && !loading\\\">\\n    <ion-row justify-content-center align-items-center style=\\\"height: 100%; flex-direction: column\\\">\\n      <ion-icon src=\\\"./assets/sample-icons/side-menu/study_areas.svg\\\" style=\\\"display:block;width:48px;height:48px;color:#444\\\"></ion-icon>\\n      <h5 style=\\\"text-align: center;color: #555555;\\\"> No education detail found.</h5>\\n      </ion-row>\\n    </ion-grid>\\n   <!------- Empty View ------->\\n\\n     <!------- Loading View ------->\\n     <ion-grid style=\\\"height: 100%\\\" *ngIf=\\\"loading\\\">\\n      <ion-row justify-content-center align-items-center style=\\\"height: 100%; flex-direction: column\\\">\\n        <ion-spinner name=\\\"bubbles\\\" style=\\\"width:32px;height:32px;margin:0 auto;stroke:#222;fill:#444;text-align: center;\\\"></ion-spinner>\\n        <h5 style=\\\"text-align: center;color: #555555;\\\">Loading...</h5>\\n        </ion-row>\\n      </ion-grid>\\n     <!------- Loading View ------->\\n\\n</ion-content>\\n\"","import { IonicModule } from '@ionic/angular';\nimport { RouterModule, Routes } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { UserService } from '../user.service';\nimport { ComponentsModule } from '../../components/components.module';\nimport { EducationDetailsPage } from './education-details.page';\nimport { EducationDetailsResolver } from './education-details.resolver';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EducationDetailsPage,\n    resolve: {\n      data: EducationDetailsResolver\n    }\n  }\n];\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    ComponentsModule,\n    RouterModule.forChild(routes),\n  ],\n  declarations: [EducationDetailsPage],\n  providers: [\n    EducationDetailsResolver,\n    UserService\n  ]\n})\nexport class EducationDetailsPageModule {\n  \n}\n","import { Component, OnInit, HostBinding } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { DataStore, ShellModel } from '../../shell/data-store';\nimport { EducationDetailsModel, UserEducationListingModel } from './education-details.model';\nimport { ModalController } from '@ionic/angular';\nimport { Subscription, BehaviorSubject } from 'rxjs';\nimport { UpdateEducationDetailsModal } from './update/update-education-details.modal';\nimport { UserService } from '../user.service';\nimport { ToastService } from '../../services/toast.service';\nimport { StorageService } from '../../services/storage.service';\nimport { AuthConstants } from '../../config/AuthConstants';\nimport { CreateEducationDetailsModal } from './create/create-education-details.modal';\nimport { AuthService } from '../../services/auth.service';\nimport { LocalUser } from '../../dbmodels/local-user';\n\n@Component({\n  selector: 'app-education-details',\n  templateUrl: './education-details.page.html',\n  styleUrls: ['../../bluspecstyles/listing.page.scss',\n  '../../bluspecstyles/listing.shell.scss',\n  '../../bluspecstyles/listing.ios.scss']\n})\nexport class EducationDetailsPage implements OnInit {\n  stateSubscription: Subscription;\n  user_profile_id:any;\n  loading:boolean=true;\n  items: Array<EducationDetailsModel>;\n\n  dataDebug:any;\n  searchQuery = '';\n  localUser:LocalUser;\n  profilerUsername: string;\n\n  constructor(public modalController: ModalController,\n    private route: ActivatedRoute,\n    private router: Router,\n    private storageService: StorageService,\n    private authService: AuthService,\n    private toastService: ToastService,\n    private userService: UserService) { }\n\n  ngOnInit(): void {\n\n    this.userService.invokeEduListChangeEvent.subscribe(value => {\n      this.items = value.items;\n      this.profilerUsername = value.username;\n      this.loading = false;\n            if(AuthConstants.DEV_MODE){\n              console.log(\"/***** SYNC DATA : \"+JSON.stringify(value));\n              this.toastService.presentToast(value.message);\n              }\n        });\n\n    this.authService.getAuthCache().then(promisedValue=>{\n      this.localUser = promisedValue;\n      this.user_profile_id = this.localUser.id;\n      /************ CHECK ROUTE PARAM REQUESTS ***************/\n      this.route.paramMap.subscribe(params => {\n      if(params && params.has(\"user_id\")){\n      this.user_profile_id = params.get(\"user_id\");\n      if(this.user_profile_id <= 0){\n        this.router.navigate(['page-not-found']);\n      }\n    }\n    });\n\n    if(this.localUser.id !== this.user_profile_id){\n      if(this.localUser.role_id !== 1){\n        this.router.navigate(['unauthorized']);\n      }\n    }\n\n    });\n\n  }\n\n\n  ionViewDidEnter(){\n    console.log(\"/*****ionViewDidEnter : \");\n    this.loadItems();\n  }\n\n  loadItems(){\n        //FIND USER SESSION AND HIT API\n        this.loading = true;\n        this.storageService\n        .get(AuthConstants.AUTH)\n        .then(res => {\n        if (res) {\n         /********** THE CALLER ***********/\n         this.userService.getEduDataSource(res.api_key, this.user_profile_id).subscribe(\n          (res: any) => {\n            console.log(\"/********* EDU DETAILS API RESPONSE *************/ \"+JSON.stringify(res));\n          if (!res.error) {\n          //this.items = res.items;\n          this.userService.invokeEduListChangeEvent.next(res);\n          } else {\n            this.toastService.presentToast(res.message);\n          }\n          },\n          (error: any) => {\n          this.toastService.presentToast('Looks like there is a Network Issue.'+error.message);\n          },\n          () => {  \n            // complete callback\n            \n        }\n          );\n        /************ THE CALLER ***********/ \n        } else {\n          this.toastService.presentToast(\"Invalid token. You are not authorized to make this request.\");\n        }\n        })\n        //END OF CALL \n  }\n\n  async openAddEduDetailModal() {\n    const modal = await this.modalController.create({\n      component: CreateEducationDetailsModal,\n      cssClass: \"fullscreen-modal\",\n      componentProps: {\n        'user_id': this.user_profile_id\n      }\n    });\n    await modal.present();\n  }\n\n  async onEduItemSelected(item:EducationDetailsModel){\n    const modal = await this.modalController.create({\n      component: UpdateEducationDetailsModal,\n      componentProps: {\n        'user': item\n      }\n    });\n    await modal.present();\n  }\n\n\n}\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\nimport { UserService } from '../user.service';\nimport { Observable } from 'rxjs';\nimport { DataStore } from '../../shell/data-store';\nimport { UserEducationListingModel, EducationDetailsModel } from './education-details.model';\n\n@Injectable()\nexport class EducationDetailsResolver implements Resolve<any> {\n\n  constructor(private userService: UserService) { }\n\n  resolve() {\n    //const dataSource: Observable<Array<EducationDetailsModel>> = this.userService.getEduDataSource();\n    //const dataStore: DataStore<Array<EducationDetailsModel>> = this.userService.getEduStore(dataSource);\n    //return dataStore;\n\n\n  //   this.storageService\n  //   .get(AuthConstants.AUTH)\n  //   .then(res => {\n  //   if (res) {\n  //     const dataSource: Observable<Array<EducationDetailsModel>> = this.userService.getEduDataSource(res.api_key);\n  //     const dataStore: DataStore<Array<EducationDetailsModel>> = this.userService.getEduStore(dataSource);\n\n\n  //     return dataStore;\n  //   }\n  // });\n  }\n}\n"],"sourceRoot":"webpack:///","file":"education-details-module-es5.js"}