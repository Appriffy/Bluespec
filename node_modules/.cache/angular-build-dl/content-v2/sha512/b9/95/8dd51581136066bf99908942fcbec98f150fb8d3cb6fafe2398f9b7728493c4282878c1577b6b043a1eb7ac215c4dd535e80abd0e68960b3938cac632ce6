{"version":3,"sources":["./src/app/user/education-details/education-details.page.html","./src/app/user/education-details/education-details.module.ts","./src/app/user/education-details/education-details.page.ts","./src/app/user/education-details/education-details.resolver.ts"],"names":[],"mappings":"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","file":"education-details-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"app/user\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Education Details</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button fill=\\\"clear\\\" color=\\\"light\\\" class=\\\"filters-btn\\\" (click)=\\\"loadItems()\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"refresh\\\"></ion-icon>\\n      </ion-button>\\n      <ion-button (click)=\\\"openAddEduDetailModal()\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"add\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"firebase-listing-content\\\">\\n  <!-- <p>{{dataDebug}}</p> -->\\n  <ion-list class=\\\"items-list\\\" *ngIf=\\\"items?.length > 0  && !loading\\\">\\n\\n    <ion-item tappable class=\\\"list-item\\\" *ngFor=\\\"let item of items\\\" (click)=\\\"onEduItemSelected(item)\\\">\\n\\n      <!-- <ion-item class=\\\"list-item\\\" *ngFor=\\\"let item of items\\\"  [routerLink]=\\\"['/education-details', item]\\\"></ion-item> -->\\n\\n      <ion-row class=\\\"user-row\\\">\\n        <ion-col class=\\\"user-data-wrapper\\\">\\n          <div class=\\\"user-info\\\">\\n\\n            <h3 class=\\\"user-name\\\" *ngIf=\\\"item.title\\\">\\n              <app-text-shell animation=\\\"bouncing\\\" [data]=\\\"item.title+' ('+item.level_name+')'\\\"></app-text-shell>\\n            </h3>\\n\\n            <h5 class=\\\"user-age\\\">\\n              <app-text-shell animation=\\\"bouncing\\\" [data]=\\\"item.organization\\\"></app-text-shell>\\n            </h5>\\n\\n            <h5 class=\\\"user-age\\\" *ngIf=\\\"item.is_current\\\">\\n              <app-text-shell animation=\\\"bouncing\\\" [data]=\\\"item.yoj?.concat(' to Current')\\\"></app-text-shell>\\n            </h5>\\n            \\n            <h5 class=\\\"user-age\\\" *ngIf=\\\"!item.is_current\\\">\\n              <app-text-shell animation=\\\"bouncing\\\" [data]=\\\"item.yoj?.concat(' - ').concat(item.yop)\\\"></app-text-shell>\\n            </h5>\\n\\n            <h5 class=\\\"user-age\\\">\\n              <app-text-shell animation=\\\"bouncing\\\" [data]=\\\"'Score: '+item.score?.concat(' ').concat(item.score_type)\\\"></app-text-shell>\\n            </h5>\\n\\n          </div>\\n        </ion-col>\\n      </ion-row>\\n    </ion-item>\\n  </ion-list>\\n  <!------- Empty View ------->\\n  <ion-grid style=\\\"height: 100%\\\" *ngIf=\\\"items?.length == 0 && !loading\\\">\\n    <ion-row justify-content-center align-items-center style=\\\"height: 100%; flex-direction: column\\\">\\n      <ion-icon src=\\\"./assets/sample-icons/side-menu/study_areas.svg\\\" style=\\\"display:block;width:48px;height:48px;color:#444\\\"></ion-icon>\\n      <h5 style=\\\"text-align: center;color: #555555;\\\"> No education detail found.</h5>\\n      </ion-row>\\n    </ion-grid>\\n   <!------- Empty View ------->\\n\\n     <!------- Loading View ------->\\n     <ion-grid style=\\\"height: 100%\\\" *ngIf=\\\"loading\\\">\\n      <ion-row justify-content-center align-items-center style=\\\"height: 100%; flex-direction: column\\\">\\n        <ion-spinner name=\\\"bubbles\\\" style=\\\"width:32px;height:32px;margin:0 auto;stroke:#222;fill:#444;text-align: center;\\\"></ion-spinner>\\n        <h5 style=\\\"text-align: center;color: #555555;\\\">Loading...</h5>\\n        </ion-row>\\n      </ion-grid>\\n     <!------- Loading View ------->\\n\\n</ion-content>\\n\"","import { IonicModule } from '@ionic/angular';\nimport { RouterModule, Routes } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { UserService } from '../user.service';\nimport { ComponentsModule } from '../../components/components.module';\nimport { EducationDetailsPage } from './education-details.page';\nimport { EducationDetailsResolver } from './education-details.resolver';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EducationDetailsPage,\n    resolve: {\n      data: EducationDetailsResolver\n    }\n  }\n];\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    ComponentsModule,\n    RouterModule.forChild(routes),\n  ],\n  declarations: [EducationDetailsPage],\n  providers: [\n    EducationDetailsResolver,\n    UserService\n  ]\n})\nexport class EducationDetailsPageModule {\n  \n}\n","import { Component, OnInit, HostBinding } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { DataStore, ShellModel } from '../../shell/data-store';\nimport { EducationDetailsModel, UserEducationListingModel } from './education-details.model';\nimport { ModalController } from '@ionic/angular';\nimport { Subscription, BehaviorSubject } from 'rxjs';\nimport { UpdateEducationDetailsModal } from './update/update-education-details.modal';\nimport { UserService } from '../user.service';\nimport { ToastService } from '../../services/toast.service';\nimport { StorageService } from '../../services/storage.service';\nimport { AuthConstants } from '../../config/AuthConstants';\nimport { CreateEducationDetailsModal } from './create/create-education-details.modal';\nimport { AuthService } from '../../services/auth.service';\nimport { LocalUser } from '../../dbmodels/local-user';\n\n@Component({\n  selector: 'app-education-details',\n  templateUrl: './education-details.page.html',\n  styleUrls: ['../../bluspecstyles/listing.page.scss',\n  '../../bluspecstyles/listing.shell.scss',\n  '../../bluspecstyles/listing.ios.scss']\n})\nexport class EducationDetailsPage implements OnInit {\n  stateSubscription: Subscription;\n  user_profile_id:any;\n  loading:boolean=true;\n  items: Array<EducationDetailsModel>;\n\n  dataDebug:any;\n  searchQuery = '';\n  localUser:LocalUser;\n  profilerUsername: string;\n\n  constructor(public modalController: ModalController,\n    private route: ActivatedRoute,\n    private router: Router,\n    private storageService: StorageService,\n    private authService: AuthService,\n    private toastService: ToastService,\n    private userService: UserService) { }\n\n  ngOnInit(): void {\n\n    this.userService.invokeEduListChangeEvent.subscribe(value => {\n      this.items = value.items;\n      this.profilerUsername = value.username;\n      this.loading = false;\n            if(AuthConstants.DEV_MODE){\n              console.log(\"/***** SYNC DATA : \"+JSON.stringify(value));\n              this.toastService.presentToast(value.message);\n              }\n        });\n\n    this.authService.getAuthCache().then(promisedValue=>{\n      this.localUser = promisedValue;\n      this.user_profile_id = this.localUser.id;\n      /************ CHECK ROUTE PARAM REQUESTS ***************/\n      this.route.paramMap.subscribe(params => {\n      if(params && params.has(\"user_id\")){\n      this.user_profile_id = params.get(\"user_id\");\n      if(this.user_profile_id <= 0){\n        this.router.navigate(['page-not-found']);\n      }\n    }\n    });\n\n    if(this.localUser.id !== this.user_profile_id){\n      if(this.localUser.role_id !== 1){\n        this.router.navigate(['unauthorized']);\n      }\n    }\n\n    });\n\n  }\n\n\n  ionViewDidEnter(){\n    console.log(\"/*****ionViewDidEnter : \");\n    this.loadItems();\n  }\n\n  loadItems(){\n        //FIND USER SESSION AND HIT API\n        this.loading = true;\n        this.storageService\n        .get(AuthConstants.AUTH)\n        .then(res => {\n        if (res) {\n         /********** THE CALLER ***********/\n         this.userService.getEduDataSource(res.api_key, this.user_profile_id).subscribe(\n          (res: any) => {\n            console.log(\"/********* EDU DETAILS API RESPONSE *************/ \"+JSON.stringify(res));\n          if (!res.error) {\n          //this.items = res.items;\n          this.userService.invokeEduListChangeEvent.next(res);\n          } else {\n            this.toastService.presentToast(res.message);\n          }\n          },\n          (error: any) => {\n          this.toastService.presentToast('Looks like there is a Network Issue.'+error.message);\n          },\n          () => {  \n            // complete callback\n            \n        }\n          );\n        /************ THE CALLER ***********/ \n        } else {\n          this.toastService.presentToast(\"Invalid token. You are not authorized to make this request.\");\n        }\n        })\n        //END OF CALL \n  }\n\n  async openAddEduDetailModal() {\n    const modal = await this.modalController.create({\n      component: CreateEducationDetailsModal,\n      cssClass: \"fullscreen-modal\",\n      componentProps: {\n        'user_id': this.user_profile_id\n      }\n    });\n    await modal.present();\n  }\n\n  async onEduItemSelected(item:EducationDetailsModel){\n    const modal = await this.modalController.create({\n      component: UpdateEducationDetailsModal,\n      componentProps: {\n        'user': item\n      }\n    });\n    await modal.present();\n  }\n\n\n}\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\nimport { UserService } from '../user.service';\nimport { Observable } from 'rxjs';\nimport { DataStore } from '../../shell/data-store';\nimport { UserEducationListingModel, EducationDetailsModel } from './education-details.model';\n\n@Injectable()\nexport class EducationDetailsResolver implements Resolve<any> {\n\n  constructor(private userService: UserService) { }\n\n  resolve() {\n    //const dataSource: Observable<Array<EducationDetailsModel>> = this.userService.getEduDataSource();\n    //const dataStore: DataStore<Array<EducationDetailsModel>> = this.userService.getEduStore(dataSource);\n    //return dataStore;\n\n\n  //   this.storageService\n  //   .get(AuthConstants.AUTH)\n  //   .then(res => {\n  //   if (res) {\n  //     const dataSource: Observable<Array<EducationDetailsModel>> = this.userService.getEduDataSource(res.api_key);\n  //     const dataStore: DataStore<Array<EducationDetailsModel>> = this.userService.getEduStore(dataSource);\n\n\n  //     return dataStore;\n  //   }\n  // });\n  }\n}\n"],"sourceRoot":"webpack:///"}